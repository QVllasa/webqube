<!-- This example requires Tailwind CSS v2.0+ -->

<div *ngIf="(project | async) as project$" class="bg-white shadow overflow-hidden sm:rounded-lg">
  <div class="px-4 py-5 sm:px-6 flex justify-between items-center">
    <div>
      <h3 class="text-lg leading-6 font-medium text-gray-900">
        {{project$.title}}
      </h3>
      <!--      <p class="mt-1 max-w-2xl text-sm text-gray-500">-->
      <!--        Personal details and application.-->
      <!--      </p>-->
    </div>
    <div>
      <span class="inline-flex items-center px-2.5 py-0.5 rounded-md text-sm font-medium bg-gray-100 text-gray-800">
        {{project$?.tier?.plan ? project$?.tier?.plan : 'Kein Plan ausgewählt'}}
      </span>
    </div>


  </div>
  <form [formGroup]="form" *ngIf="(user | async) as user$" class="border-t border-gray-200 px-4 py-5 sm:p-0">
    <dl class="sm:divide-y sm:divide-gray-200">
      <div class="py-4 sm:py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6">
        <dt class="text-sm font-medium text-gray-500">
          Besitzer
        </dt>
        <dd class="mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2">
          {{user$.displayName}}
        </dd>
      </div>
      <div class="py-4 sm:py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6 flex items-center">
        <dt class=" text-sm font-medium text-gray-500">
          Deine Wunschdomain
        </dt>
        <dd class="mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2">
          <div>
            <label for="domain" class="sr-only block text-sm font-medium text-gray-700">
              Domain
            </label>
            <div class="mt-1 flex rounded-md shadow-sm">
              <span
                class="inline-flex items-center px-3 rounded-l-md border border-r-0 border-gray-300 bg-gray-50 text-gray-500 sm:text-sm">
                http://
              </span>
              <input formControlName="domainName" type="text" name="domain" id="domain"
                     class="flex-1 min-w-0 block w-full px-3 py-2 rounded-none rounded-r-md focus:ring-amber-500 focus:border-amber-500 sm:text-sm border-gray-300"
                     placeholder="www.example.com">
              <button *ngIf="!isSaving" (click)="checkDomain()" mat-ripple type="button"
                      class="ml-3 inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md shadow-sm text-white bg-amber-600 hover:bg-amber-700 focus:outline-none">
                <span *ngIf="!isLoading">Verfügbarkeit prüfen</span>
                <mat-spinner [diameter]="20" *ngIf="isLoading"></mat-spinner>
              </button>

              <button (click)="saveDomain()" mat-ripple type="button"
                      class="ml-3 inline-flex items-center px-3 py-2  text-sm leading-4 font-medium rounded-md shadow-sm text-white  bg-amber-600 focus:outline-none">
                <span *ngIf="!isLoading && !isSaving">
                  <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24"
                       stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                          d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
                  </svg>
                </span>
                <mat-spinner [diameter]="20" *ngIf="isSaving"></mat-spinner>
              </button>

            </div>

          </div>
        </dd>
      </div>
      <div class="py-4 sm:py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6">
        <dt class="text-sm font-medium text-gray-500">
          Aktueller Stand
        </dt>
        <dd class="mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2">
          Nicht begonnen
        </dd>
      </div>
    </dl>
  </form>

  <!-- This example requires Tailwind CSS v2.0+ -->
  <div *ngIf="!project$.tier" class="bg-white">
    <div class="max-w-7xl mx-auto text-center py-12 px-4 sm:px-6 lg:py-16 lg:px-8">
      <h2 class="text-2xl font-extrabold tracking-tight text-gray-900 sm:text-4xl">
        <span class="block">Bereit loszulegen?</span>
        <span class="block mt-4 text-lg font-medium text-gray-500">Besprich mit uns in einem Call dein Projekt.</span>
      </h2>
      <div class="mt-8 flex justify-center items-center">
        <div class="inline-flex rounded-md shadow">
          <a href="#"
             class="inline-flex items-center justify-center px-5 py-3 border border-transparent text-base font-medium rounded-md text-white bg-amber-600 hover:bg-amber-700">
            Termin anfordern
          </a>
        </div>

      </div>
      <h2  class="text-2xl font-extrabold tracking-tight text-gray-900 sm:text-4xl">
        <span class="block mt-8 text-lg font-medium text-gray-500">oder gleich loslegen.
          <br>
          Wähle dazu einfach einen Plan aus.
        </span>
      </h2>
      <!-- This example requires Tailwind CSS v2.0+ -->
      <fieldset >
        <div class="relative mt-8 grid grid-cols-1 gap-y-6 sm:grid-cols-3 sm:gap-x-4">
          <!--
            Checked: "border-transparent", Not Checked: "border-gray-300"
            Active: "ring-2 ring-amber-500"
          -->
          <label *ngFor="let tier of tiers"
                 [ngClass]="tier.selected ? 'border-transparent ring-2 ring-amber-500':'border-gray-300'"
                 class="relative bg-white border  rounded-lg shadow-sm p-4 flex cursor-pointer focus:outline-none">
            <input [value]="tier.selected" type="radio" name="project-type" value="Newsletter" class="sr-only"
                   (click)="onSelectTier(tier)"
                   aria-labelledby="project-type-0-label"
                   aria-describedby="project-type-0-description-0 project-type-0-description-1">
            <div class="flex-1 flex">
              <div class="flex flex-col relative h-32">
                <span id="project-type-0-label" class="block text-left text-sm font-semibold text-gray-800">
                  {{tier.plan}}
                </span>
                <span id="project-type-0-description-0" class="mt-1 text-left flex items-center text-sm text-gray-500">
                  {{tier.description}}
                </span>
                <span class="absolute bottom-0 text-lg font-semibold text-gray-900">
                  {{tier.fixPrice}}€ /Projekt
                </span>
              </div>
            </div>
            <!--
              Not Checked: "invisible"

              Heroicon name: solid/check-circle
            -->
            <svg [ngClass]="tier.selected ? '':'invisible'" class="h-5 w-5 text-amber-600" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"
                 fill="currentColor" aria-hidden="true">
              <path fill-rule="evenodd"
                    d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"
                    clip-rule="evenodd"/>
            </svg>
            <!--
              Active: "border", Not Active: "border-2"
              Checked: "border-amber-500", Not Checked: "border-transparent"
            -->
            <div [ngClass]="tier.selected ? 'border border-amber-500':'border-2 border-transparent'" class="absolute -inset-px rounded-lg border-2 pointer-events-none" aria-hidden="true"></div>
          </label>
          <div *ngIf="isSavingTier" class="absolute top-0 left-0 right-0 bottom-0 bg-gray-50 opacity-30 rounded-lg"></div>
          <button [disabled]="isSavingTier" (click)="onUpdateProject()" *ngIf="isSelected()"
             class="col-start-2 col-end-3 mt-6 inline-flex items-center justify-center px-5 py-3 border border-transparent text-base font-medium rounded-md text-white bg-amber-600 hover:bg-amber-700">
            <span *ngIf="!isSavingTier">Weiter</span>
              <mat-spinner *ngIf="isSavingTier" [diameter]="20"></mat-spinner>
          </button>


        </div>
      </fieldset>
    </div>
  </div>
  <div *ngIf="project$.tier" class="bg-white">
    <div class="max-w-7xl mx-auto text-center py-8 px-4 sm:px-6 lg:py-16 lg:px-8">
      <h2 class="text-2xl font-extrabold tracking-tight text-gray-900 sm:text-4xl">
        <span class="block">Verfolge jeden Fortschritt.</span>
        <span class="block mt-4 text-lg font-medium text-gray-500">Hier kannst du in jeder Phase deine Wünsche und Anforderungen präzise aufschreiben.</span>
      </h2>
      <div class="mt-8" *ngIf="project$.tier">
        <div class="text-left rounded-lg sm:grid sm:grid-cols-3 gap-4">
          <div *ngFor="let milestone of milestones" class="border border-2 border-gray-300 hover:border-amber-500  rounded-lg  relative group bg-white p-6 focus-within:border-amber-500 focus-within:ring-2 focus-within:ring-inset focus-within:ring-amber-500">
            <div>
              <span class="rounded-lg inline-flex p-3 bg-teal-50 text-teal-700 ring-4 ring-white">
                <!-- Heroicon name: outline/clock -->
                <svg class="h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
                </svg>
              </span>
            </div>
            <div class="mt-8">
              <h3 class="text-lg font-medium text-left">
                <button class="flex justify-start">
                  <span class="text-left">{{milestone.step}}</span>
                  <span class="text-left absolute inset-0" aria-hidden="true"></span>

                </button>
              </h3>
              <p class="mt-2 text-sm text-gray-500">
                {{milestone.description}}
                </p>
            </div>
            <span class="pointer-events-none absolute top-6 right-6 text-gray-300 group-hover:text-amber-500" aria-hidden="true">
              <svg class="h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24">
                <path d="M20 4h1a1 1 0 00-1-1v1zm-1 12a1 1 0 102 0h-2zM8 3a1 1 0 000 2V3zM3.293 19.293a1 1 0 101.414 1.414l-1.414-1.414zM19 4v12h2V4h-2zm1-1H8v2h12V3zm-.707.293l-16 16 1.414 1.414 16-16-1.414-1.414z" />
              </svg>
            </span>
          </div>

        </div>

      </div>
    </div>
  </div>


</div>





