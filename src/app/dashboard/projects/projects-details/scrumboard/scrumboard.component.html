<div *ngIf="board" class="mt-16 h-full w-full overflow-hidden" fxLayout="column">

  <div class="py-8" fxFlex="none" fxLayout="row" fxLayoutAlign="start center">
    <h1 class="text-2xl font-bold text-gray-700 m-0">{{boardTitle}}</h1>
  </div>

  <div (cdkDropListDropped)="dropList($event)"
       [cdkDropListData]="board.children"
       cdkDropList
       cdkDropListOrientation="horizontal"
       class="min-h-0 w-full grid grid-cols-3 overflow-scroll"
       fxFlex="auto"
       fxLayout="row"
       fxLayoutAlign="start start"
       fxLayoutGap="24px">
    <div *ngFor="let list of board.children"
         [cdkDragData]="list"
         cdkDrag
         cdkDropListGroup
         class="rounded bg-gray-50 overflow-hidden max-h-full col-span-1"
         fxFlex="none"
         fxLayout="column">
      <div cdkDragHandle class="p-4 cursor-pointer flex justify-between items-center text-gray-600" fxFlex="none">
        <h2 class=" text-base font-semibold m-0 select-none" fxFlex="none">{{ list.label }}</h2>

        <button mat-ripple>
          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 " fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                  d="M12 9v3m0 0v3m0-3h3m-3 0H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"/>
          </svg>
        </button>
      </div>

      <div class="flex-auto">
        <div (cdkDropListDropped)="drop($event)"
             [cdkDropListConnectedTo]="getConnectedList(board)"
             [cdkDropListData]="list.children"
             cdkDropList
             class="px-4 pb-4"
             id="{{ list.id }}">
          <div (click)="open(board, list, card)"
               *ngFor="let card of list.children"
               [cdkDragData]="card"
               cdkDrag
               class="my-2 bg-white shadow rounded-lg cursor-pointer ">


            <div class="p-4 text-left">
              <div *ngIf="card.labels?.length > 0" class="mb-2" fxLayout="row" fxLayoutGap="8px">
                <div *ngFor="let label of card.labels"
                     [ngClass]="label.bgClass"
                     class="label"
                     fxFlex></div>
              </div>

              <h3 class="font-semibold text-xs">{{ card.title }}</h3>

            </div>
          </div>
        </div>
      </div>

    </div>

  </div>
</div>
